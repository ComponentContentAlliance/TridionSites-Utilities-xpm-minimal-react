import{jsx as e,jsxs as t,Fragment as n}from"react/jsx-runtime";import{createContext as o,useState as r,useContext as i,useEffect as a}from"react";var s=function(){return s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var l={background:"#007373",width:"100%",position:"fixed",bottom:0,padding:"10px 30px"},c={display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"30px"},d={display:"flex",alignItems:"center",justifyContent:"center",gap:"15px"},p={cursor:"pointer",color:"#fff",fontWeight:"bold",fontSize:"18px",background:"#034545",padding:"8px 22px",borderRadius:"3px",border:"1px solid #eee",display:"flex"},h={},g=function(n){var o=n.setToggleXpm,r=n.toggleXpm,i=f(),a=i.showPageEditorLink,g=i.editorUrl,m=i.pageId,u=i.showPage;return e("div",{className:"headlessXpmBar",style:s({},l),children:t("div",{className:"headlessXpmBarContainer",style:s({},c),children:[e("div",{className:"headlessXpmBrandLogo",style:s({},h)}),t("div",{className:"headlessXpmBarButtonGroup",style:s({},d),children:[a&&e("button",{className:"headlessXpmBarButton",onClick:function(){if(u){var e="".concat(g,"/page?item=").concat(m,"&tab=general.content");window.open(e,"_blank")}},style:s({},p),children:t("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"form",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:[e("path",{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}),e("path",{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"})]})}),e("button",{className:"headlessXpmBarButton",onClick:function(){return o(!r)},title:"Edit Components",style:s({},p),children:e("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"edit",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:e("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"})})})]})]})})},m=function(e){return"boolean"==typeof e?e:"string"==typeof e&&"true"===e.toLowerCase()},u=o(void 0),f=function(){var e=i(u);if(!e)throw new Error("useHeadlessXpmContext must be used within HeadlessXpmProvider");return e},v=function(n){var o=n.editorUrl,i=n.icon,a=n.children,s=n.linkStyle,l=n.containerStyle,c=n.contentStyle,d=n.iconStyle,p=n.showPageEditorLink,h=void 0!==p&&p,f=n.showExpSpaceEditor,v=void 0===f||f,y=n.staging,x=r(!1),b=x[0],w=x[1],X=r(!1),S=X[0],L=X[1],E=r(""),C=E[0],k=E[1];return t(u.Provider,{value:{editorUrl:o,icon:i,linkStyle:s,containerStyle:l,contentStyle:c,iconStyle:d,showExpSpaceEditor:v,showPageEditorLink:h,toggleXpm:b,pageId:C,showPage:S,setPageId:k,setShowPage:L,staging:m(y)},children:[a,m(y)&&v&&e(g,{setToggleXpm:w,toggleXpm:b})]})},y={headlessXpmRegion:{position:"relative",border:"1px solid transparent",transition:"border-color 0.2s ease"},headlessXpmRegionHover:{border:"2px solid #17c13e",boxShadow:"0 0 0 1px #17c13e"},headlessXpmIcon:{position:"absolute",top:"6px",right:"6px",background:"#007373",padding:"4px",borderRadius:"4px",textDecoration:"none",zIndex:999,transition:"opacity 0.3s ease",color:"#ffffff",height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},headlessXpmContent:{}},x=function(o){var i=o.tcmId,l=o.children,c=o.isPage,d=void 0!==c&&c,p=r(!1),h=p[0],g=p[1],m=f(),u=m.editorUrl,v=m.icon,x=m.containerStyle,b=m.linkStyle,w=m.contentStyle,X=m.iconStyle,S=m.showExpSpaceEditor,L=m.toggleXpm,E=m.setPageId,C=m.setShowPage,k=m.staging,P=d?"".concat(u,"/page?item=").concat(i,"&tab=general.content"):"".concat(u,"/component?item=").concat(i,"&tab=general.content"),B={opacity:L?1:0};return a(function(){d&&(C(!0),E(i))},[d,i]),a(function(){L&&g(!0)},[L]),k?t("div",{className:"headlessXpmRegion",style:s(s(s({},x),y.headlessXpmRegion),h?y.headlessXpmRegionHover:{}),onMouseEnter:function(){return L&&g(!0)},onMouseLeave:function(){return L&&g(!1)},children:[(L||!S)&&e("a",{href:P,className:"headlessXpmIcon",target:"_blank",rel:"noopener noreferrer",title:"Edit in Experiance sapce",style:s(s(s(s({},B),b),y.headlessXpmIcon),{opacity:L||h?1:0,transition:"opacity 0.3s ease"}),children:v||e("svg",{style:X,viewBox:"64 64 896 896",focusable:"false","data-icon":"edit",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:e("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"})})}),e("div",{className:"headlessXpmContent",style:s(s({},w),y.headlessXpmContent),children:l})]}):e(n,{children:l})};export{x as HeadlessXpmEditor,v as HeadlessXpmProvider};
